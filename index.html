<html>
  <head>
    <title>Fund Lagbe</title>

    <script src="Asset/JavaScript/script.js"></script>
    <script>
      getPosts();
      function loadPosts(items) {
        const div = document.getElementById("posts");
        items.forEach((item) => {
          if (item["approveStatus"] == 1) {
            div.innerHTML +=
              `
          <div>
          <h2>` +
              item["postTitle"] +
              // item["postID"] +
              `
             </h2>
             <img class="postPhoto" src="Asset/Storage/postPhotos/` +
              item["postID"] +
              `.png" />
         <p>` +
              item["postContent"] +
              `</p>
          <input type="text" class="inpTxt flow" value="Fund Target: ` +
              item["fundTarget"] +
              ` BDT" readonly>
          <input type="text" class="inpTxt flow" value="Fund Raised: ` +
              item["currentFund"] +
              ` BDT" readonly><br>
            <input type="button" class="inpTxt inv" value="Invest?">
          </div>
          `;
          }
        });
        items.forEach((item) => {
          document.getElementById("postPhoto").innerHTML =
            `
          <img id="profilePhoto" src="Asset/Storage/postPhotos/` +
            item["postID"] +
            `.png" />
          `;
        });
      }

      function getPosts() {
        let xhttp = new XMLHttpRequest();
        xhttp.open("POST", "redirect.php?getPosts");
        xhttp.setRequestHeader(
          "Content-type",
          "application/x-www-form-urlencoded"
        );
        xhttp.send();

        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            // let username = JSON.parse(this.responseText);
            let posts = JSON.parse(this.responseText);
            // alert(50);
            loadPosts(posts);
            // alert(this.responseText);
          }
        };
      }
    </script>

    <link rel="stylesheet" href="Asset/CSS/index.css" />
  </head>
  <body>
    <div id="dialogue" class="box">
      <div>
        <h1>This is the new Index Page!!</h1>
        <p>You will see fund-raising posts here!.</p>
      </div>
      <!-- <div style="background-color: orangered">
        <h1>This is the new Index Page!!</h1>
        <p>You will see fund-raising posts here!.</p>
      </div> -->
      <div id="posts">
        <!-- <div style="background-color: blue">post 01</div>
        <div style="background-color: blue">post 01</div> -->
      </div>

      <!-- <div>
        <h2></h2>
        <p></p>
        <input type="text" class="inpTxt" value="">
        <input type="text" class="inpTxt" value="">
      </div> -->
    </div>
    <div id="divMenuDD" class="menuDD"></div>
  </body>
  <script>
    window.onload = function () {
      runFunc();
    };
  </script>
</html>
